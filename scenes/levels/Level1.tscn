[gd_scene load_steps=41 format=3 uid="uid://4k5x34mphdqf"]

[ext_resource type="PackedScene" uid="uid://cpmdc8rfjol6m" path="res://scenes/levels/templates/GameplayLevelTemplate.tscn" id="1_1pwbc"]
[ext_resource type="PackedScene" uid="uid://bgld15c7p5u3y" path="res://scenes/gridmaps/EnvironmentalGridMap.tscn" id="2_x4si1"]
[ext_resource type="MeshLibrary" uid="uid://cumsglylffol6" path="res://scenes/gridmaps/Level1MeshLibrary.tres" id="3_fh0io"]
[ext_resource type="Environment" uid="uid://t6evrvm00ivs" path="res://resources/world environments/Level1WorldEnvironment.tres" id="4_fh0io"]
[ext_resource type="MeshLibrary" uid="uid://bfeswl2517v65" path="res://scenes/gridmaps/floors/moss/MossMeshLibrary.tres" id="4_m00rq"]
[ext_resource type="PackedScene" uid="uid://dvvjfmok32sw2" path="res://scenes/environment/Birdcage.tscn" id="5_76cw8"]
[ext_resource type="PackedScene" uid="uid://doy8tr4xqoi1p" path="res://scenes/entities/Player.tscn" id="7_m00rq"]
[ext_resource type="Script" uid="uid://c36kadp7c060h" path="res://addons/proton_scatter/src/scatter.gd" id="8_njy47"]
[ext_resource type="Script" uid="uid://csde2gofdtawx" path="res://addons/proton_scatter/src/stack/modifier_stack.gd" id="9_j7nyf"]
[ext_resource type="Script" uid="uid://x5mnpak0fr3b" path="res://addons/proton_scatter/src/modifiers/base_modifier.gd" id="10_xbvxr"]
[ext_resource type="Script" uid="uid://c5dqhovtmfkke" path="res://addons/proton_scatter/src/modifiers/create_inside_random.gd" id="11_bspq0"]
[ext_resource type="Script" uid="uid://dcmcvyhynhe4u" path="res://addons/proton_scatter/src/modifiers/randomize_transforms.gd" id="12_dqba7"]
[ext_resource type="Script" uid="uid://dq1cmg2ghaamo" path="res://addons/proton_scatter/src/modifiers/relax.gd" id="13_usw5k"]
[ext_resource type="Script" uid="uid://dscsff8ieby4g" path="res://addons/proton_scatter/src/modifiers/project_on_geometry.gd" id="14_jsker"]
[ext_resource type="Script" uid="uid://das4v0clsmend" path="res://addons/proton_scatter/src/scatter_item.gd" id="15_6ex7q"]
[ext_resource type="Script" uid="uid://bquoxcekfjbdd" path="res://addons/proton_scatter/src/scatter_shape.gd" id="16_ijfg6"]
[ext_resource type="Script" uid="uid://fwernmtfuu6e" path="res://addons/proton_scatter/src/shapes/sphere_shape.gd" id="17_ijoxy"]
[ext_resource type="Script" uid="uid://jdjh2imli3fo" path="res://source/shaders/GrassDeform.cs" id="18_j7nyf"]
[ext_resource type="Material" uid="uid://bn3fr3m3glrnp" path="res://scenes/environment/foliage/bushes/materials/Bush1.tres" id="19_xbvxr"]
[ext_resource type="Material" uid="uid://dtyfwl42tihg" path="res://scenes/environment/foliage/bushes/materials/Bush2.tres" id="20_bspq0"]
[ext_resource type="Material" uid="uid://bymoti8hpjarg" path="res://scenes/environment/foliage/bushes/materials/Bush3.tres" id="21_dqba7"]
[ext_resource type="Material" uid="uid://f1mwyfmplm8u" path="res://scenes/environment/foliage/bushes/materials/BlueberryBush.tres" id="22_usw5k"]
[ext_resource type="Script" uid="uid://w0nsmjalgq6k" path="res://source/SpriteSorter3D.cs" id="26_ijoxy"]
[ext_resource type="Texture2D" uid="uid://chbhhaub5yksa" path="res://assets/atlases/storage/StorageAtlas.sprites/IronBox1.tres" id="27_l40or"]
[ext_resource type="Texture2D" uid="uid://bo57c8fdxgeyw" path="res://assets/atlases/storage/StorageAtlas.sprites/IronBox2.tres" id="28_l40or"]
[ext_resource type="Texture2D" uid="uid://k3cuxao7x127" path="res://assets/atlases/storage/StorageAtlas.sprites/IronBox3.tres" id="29_hnhv5"]
[ext_resource type="Texture2D" uid="uid://dentv8gjv6r8d" path="res://assets/atlases/storage/StorageAtlas.sprites/StorageSide.tres" id="30_86um8"]
[ext_resource type="Texture2D" uid="uid://bn58x3x3adb5o" path="res://assets/atlases/storage/StorageAtlas.sprites/StorageFront.tres" id="32_srkvl"]

[sub_resource type="Resource" id="Resource_l40or"]
script = ExtResource("11_bspq0")
amount = 10
enabled = true
override_global_seed = false
custom_seed = 0
restrict_height = true
reference_frame = 1

[sub_resource type="Resource" id="Resource_hnhv5"]
script = ExtResource("12_dqba7")
position = Vector3(0.15, 0.15, 0.15)
rotation = Vector3(0, 0, 0)
scale = Vector3(-1, -1, -1)
enabled = true
override_global_seed = false
custom_seed = 0
restrict_height = false
reference_frame = 2

[sub_resource type="Resource" id="Resource_86um8"]
script = ExtResource("13_usw5k")
iterations = 3
offset_step = 0.2
consecutive_step_multiplier = 0.75
use_computeshader = true
enabled = true
override_global_seed = false
custom_seed = 0
restrict_height = true
reference_frame = 0

[sub_resource type="Resource" id="Resource_hpass"]
script = ExtResource("14_jsker")
ray_direction = Vector3(0, -1, 0)
ray_length = 5.0
ray_offset = 5.0
remove_points_on_miss = false
align_with_collision_normal = false
max_slope = 90.0
collision_mask = 1
exclude_mask = 0
enabled = true
override_global_seed = false
custom_seed = 0
restrict_height = false
reference_frame = 0

[sub_resource type="Resource" id="Resource_srkvl"]
script = ExtResource("9_j7nyf")
stack = Array[ExtResource("10_xbvxr")]([SubResource("Resource_l40or"), SubResource("Resource_hnhv5"), SubResource("Resource_86um8"), SubResource("Resource_hpass")])

[sub_resource type="Resource" id="Resource_g8bsm"]
script = ExtResource("17_ijoxy")
radius = 0.40658

[sub_resource type="BoxShape3D" id="BoxShape3D_l40or"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_l40or"]
transparency = 1
no_depth_test = true
albedo_texture = ExtResource("27_l40or")
normal_enabled = true

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_86um8"]
transparency = 1
no_depth_test = true
albedo_texture = ExtResource("29_hnhv5")
normal_enabled = true

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_srkvl"]
transparency = 1
albedo_texture = ExtResource("30_86um8")
normal_enabled = true

[sub_resource type="BoxShape3D" id="BoxShape3D_hpass"]
size = Vector3(0.8, 1, 2)

[sub_resource type="BoxShape3D" id="BoxShape3D_srkvl"]
size = Vector3(2, 1, 1)

[node name="GameplayLevelTemplate" instance=ExtResource("1_1pwbc")]

[node name="EnvironmentalGridMap" parent="GridMaps" index="1" instance=ExtResource("2_x4si1")]
mesh_library = ExtResource("3_fh0io")
data = {
"cells": PackedInt32Array(-65536, 0, 17, -65535, 0, 18, -65536, 1, 15, -65535, 1, 16, -65534, 1, 19, -65533, 1, 20, -65534, 0, 21, -65533, 0, 22, -65536, 3, 23, -65535, 3, 24, -65536, 2, 25, -65535, 2, 26, -65534, 3, 27, -65533, 3, 28, -65534, 2, 29, -65533, 2, 30, -65532, 0, 17, -65532, 1, 15, -65532, 2, 25, -65532, 3, 23, -65531, 0, 18, -65531, 1, 16, -65531, 2, 26, -65531, 3, 24, -65530, 0, 21, -65530, 1, 19, -65530, 2, 29, -65530, 3, 27, -65529, 0, 22, -65529, 1, 20, -65529, 2, 30, -65529, 3, 28, -65528, 0, 17, -65528, 1, 15, -65528, 2, 25, -65528, 3, 23, -65527, 0, 18, -65527, 1, 16, -65527, 2, 26, -65527, 3, 24, -65526, 0, 21, -65526, 1, 19, -65526, 2, 29, -65526, 3, 27, -65525, 0, 22, -65525, 1, 20, -65525, 2, 30, -65525, 3, 28, -65536, 4, 17, -65536, 5, 15, -65536, 6, 25, -65536, 7, 23, -65535, 4, 18, -65535, 5, 16, -65535, 6, 26, -65535, 7, 24, -65534, 4, 21, -65534, 5, 19, -65534, 6, 29, -65534, 7, 27, -65533, 4, 22, -65533, 5, 20, -65533, 6, 30, -65533, 7, 28, -65532, 4, 17, -65532, 5, 15, -65532, 6, 25, -65532, 7, 23, -65531, 4, 18, -65531, 5, 16, -65531, 6, 26, -65531, 7, 24, -65530, 4, 21, -65530, 5, 19, -65530, 6, 29, -65530, 7, 27, -65529, 4, 22, -65529, 5, 20, -65529, 6, 30, -65529, 7, 28, -65528, 4, 17, -65528, 5, 15, -65528, 6, 25, -65528, 7, 23, -65527, 4, 18, -65527, 5, 16, -65527, 6, 26, -65527, 7, 24, -65526, 4, 21, -65526, 5, 19, -65526, 6, 29, -65526, 7, 27, -65525, 4, 22, -65525, 5, 20, -65525, 6, 30, -65525, 7, 28, 0, 0, 31, 1, 0, 32, 2, 0, 37, 3, 0, 38, 4, 0, 43, 5, 0, 44, 6, 0, 49, 7, 0, 50, 8, 0, 31, 9, 0, 32, 10, 0, 37, 11, 0, 38, 65536, 0, 33, 65537, 0, 34, 65538, 0, 39, 65539, 0, 40, 65540, 0, 45, 65541, 0, 46, 65542, 0, 51, 65543, 0, 52, 65544, 0, 33, 65545, 0, 34, 65546, 0, 39, 65547, 0, 40, 131072, 0, 35, 131073, 0, 36, 131074, 0, 41, 131075, 0, 42, 131076, 0, 47, 131077, 0, 48, 131078, 0, 53, 131079, 0, 54, 131080, 0, 35, 131081, 0, 36, 131082, 0, 41, 131083, 0, 42, 196608, 65535, 1, 196609, 65535, 2, 196610, 65535, 1, 196611, 65535, 2, 196612, 65535, 1, 196613, 65535, 2, 196614, 65535, 1, 196615, 65535, 2, 196616, 65535, 1, 196617, 65535, 2, 196618, 65535, 1, 196619, 65535, 2, 262143, 0, 4, 262143, 1, 3, 262143, 2, 4, 262143, 3, 3, 262143, 4, 4, 262143, 5, 3, 262143, 6, 4, 262143, 7, 3, 196620, 1, 5, 196620, 0, 6, 196620, 2, 6, 196620, 3, 5, 196620, 4, 6, 196620, 5, 5, 196620, 6, 6, 196620, 7, 5, 262143, 65535, 0, 196620, 65535, 0, 196607, 8, 41, 131084, 8, 42, 131071, 8, 39, 65548, 8, 40, 12, 8, 38, 65535, 8, 37)
}
metadata/_editor_floor_ = Vector3(0, 0, 0)

[node name="EnvironmentalGridMap2" parent="GridMaps" index="2" instance=ExtResource("2_x4si1")]
mesh_library = ExtResource("4_m00rq")
data = {
"cells": PackedInt32Array(5, 5, 5, 6, 5, 6, 5, 4, 7, 6, 4, 8)
}
metadata/_editor_floor_ = Vector3(0, 0, 0)

[node name="WorldEnvironment" parent="." index="2"]
environment = ExtResource("4_fh0io")

[node name="Camera" parent="." index="3" node_paths=PackedStringArray("Target")]
fov = 10.0
Target = NodePath("../Player")

[node name="Birdcage" parent="." index="4" instance=ExtResource("5_76cw8")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6, 0, 3.5)

[node name="Birdcage2" parent="." index="5" instance=ExtResource("5_76cw8")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 9.25, 2.25, 4.5)
visible = false

[node name="Player" parent="." index="6" node_paths=PackedStringArray("camera") instance=ExtResource("7_m00rq")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 8.4791, 0, 6.62606)
camera = NodePath("../Camera")

[node name="ProtonScatter" type="Node3D" parent="." index="7"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6.45077, -1.67877, 4.71841)
script = ExtResource("8_njy47")
modifier_stack = SubResource("Resource_srkvl")
Performance/use_chunks = true
Performance/chunk_dimensions = Vector3(15, 15, 15)
metadata/_custom_type_script = "uid://c36kadp7c060h"

[node name="ScatterItem" type="Node3D" parent="ProtonScatter" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.539644, 0, 0)
script = ExtResource("15_6ex7q")
path = "uid://b8abs8me7ckgo"

[node name="ScatterItem2" type="Node3D" parent="ProtonScatter" index="1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.539644, 0, 0)
script = ExtResource("15_6ex7q")
path = "uid://duc7vfj54chd1"

[node name="ScatterItem3" type="Node3D" parent="ProtonScatter" index="2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.539644, 0, 0)
script = ExtResource("15_6ex7q")
path = "uid://chi65aghq5r2e"

[node name="ScatterItem4" type="Node3D" parent="ProtonScatter" index="3"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.539644, 0, 0)
script = ExtResource("15_6ex7q")
path = "uid://dxppqrko3u7t4"

[node name="ScatterShape" type="Node3D" parent="ProtonScatter" index="4"]
transform = Transform3D(1, 0, -2.98023e-08, 0, 1, 0, 2.98023e-08, 0, 1, 0, 0, 0)
script = ExtResource("16_ijfg6")
shape = SubResource("Resource_g8bsm")

[node name="GrassDeformer" type="Node3D" parent="ProtonScatter" index="5" node_paths=PackedStringArray("deformer")]
script = ExtResource("18_j7nyf")
shaderMaterials = Array[ShaderMaterial]([ExtResource("19_xbvxr"), ExtResource("20_bspq0"), ExtResource("21_dqba7"), ExtResource("22_usw5k")])
deformer = NodePath("../../Player")

[node name="Node3D7" type="Node3D" parent="." index="8"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2, 0, 6.25)

[node name="StaticBody3D" type="StaticBody3D" parent="Node3D7" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Node3D7/StaticBody3D" index="0"]
shape = SubResource("BoxShape3D_l40or")

[node name="SpriteSorter" type="Node3D" parent="Node3D7" index="1" node_paths=PackedStringArray("sprite")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.5)
script = ExtResource("26_ijoxy")
sprite = NodePath("../Sprite3D")

[node name="Sprite3D" type="Sprite3D" parent="Node3D7" index="2"]
transform = Transform3D(0.4, 0, 0, 0, 0.282843, 0.282843, 0, -0.282843, 0.282843, 0, 0.726, -0.23)
cast_shadow = 0
shaded = true
double_sided = false
no_depth_test = true
texture = ExtResource("28_l40or")

[node name="CSGBox3D" type="CSGBox3D" parent="Node3D7" index="3"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)
cast_shadow = 3
flip_faces = true

[node name="CSGBox3D2" type="CSGBox3D" parent="Node3D7" index="4"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.05, 0)
cast_shadow = 3
size = Vector3(1, 0.1, 1)

[node name="Node3D8" type="Node3D" parent="." index="9"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3, 0, 6.25)

[node name="StaticBody3D" type="StaticBody3D" parent="Node3D8" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Node3D8/StaticBody3D" index="0"]
shape = SubResource("BoxShape3D_l40or")

[node name="SpriteSorter" type="Node3D" parent="Node3D8" index="1" node_paths=PackedStringArray("sprite")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.75)
script = ExtResource("26_ijoxy")
sprite = NodePath("../Sprite3D")

[node name="Sprite3D" type="Sprite3D" parent="Node3D8" index="2"]
transform = Transform3D(0.4, 0, 0, 0, 0.282843, 0.282843, 0, -0.282843, 0.282843, 0, 0.726, -0.23)
material_override = SubResource("StandardMaterial3D_l40or")
cast_shadow = 0
shaded = true
double_sided = false
render_priority = 1
texture = ExtResource("27_l40or")

[node name="CSGBox3D" type="CSGBox3D" parent="Node3D8" index="3"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)
cast_shadow = 3
flip_faces = true

[node name="CSGBox3D2" type="CSGBox3D" parent="Node3D8" index="4"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.05, 0)
cast_shadow = 3
size = Vector3(1, 0.1, 1)

[node name="Node3D9" type="Node3D" parent="." index="10"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 0, 6.25)

[node name="StaticBody3D" type="StaticBody3D" parent="Node3D9" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Node3D9/StaticBody3D" index="0"]
shape = SubResource("BoxShape3D_l40or")

[node name="SpriteSorter" type="Node3D" parent="Node3D9" index="1" node_paths=PackedStringArray("sprite")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.75)
script = ExtResource("26_ijoxy")
sprite = NodePath("../Sprite3D")

[node name="Sprite3D" type="Sprite3D" parent="Node3D9" index="2"]
transform = Transform3D(0.4, 0, 0, 0, 0.282843, 0.282843, 0, -0.282843, 0.282843, 0, 0.726, -0.23)
material_override = SubResource("StandardMaterial3D_86um8")
cast_shadow = 0
shaded = true
double_sided = false
render_priority = 1
texture = ExtResource("29_hnhv5")

[node name="CSGBox3D" type="CSGBox3D" parent="Node3D9" index="3"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)
cast_shadow = 3
flip_faces = true

[node name="CSGBox3D2" type="CSGBox3D" parent="Node3D9" index="4"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.05, 0)
cast_shadow = 3
size = Vector3(1, 0.1, 1)

[node name="Node3D5" type="Node3D" parent="." index="11"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.45, 0, 7)

[node name="Sprite3D" type="Sprite3D" parent="Node3D5" index="0"]
transform = Transform3D(0.4, 0, 0, 0, 0.265165, 0.282843, 0, -0.265165, 0.282843, -0.05, 1.21206, -1.19869)
material_override = SubResource("StandardMaterial3D_srkvl")
cast_shadow = 0
shaded = true
no_depth_test = true
texture = ExtResource("30_86um8")

[node name="StaticBody3D" type="StaticBody3D" parent="Node3D5" index="1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Node3D5/StaticBody3D" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.5, -1)
shape = SubResource("BoxShape3D_hpass")
debug_color = Color(0, 0.6, 0.701961, 1)

[node name="SpriteSorter" type="Node3D" parent="Node3D5" index="2" node_paths=PackedStringArray("sprite")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -3)
script = ExtResource("26_ijoxy")
sprite = NodePath("../Sprite3D")

[node name="CSGBox3D" type="CSGBox3D" parent="Node3D5" index="3"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, -1)
cast_shadow = 3
flip_faces = true
size = Vector3(0.7, 2, 1.8)

[node name="CSGBox3D2" type="CSGBox3D" parent="Node3D5" index="4"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.055, -1)
cast_shadow = 3
size = Vector3(0.7, 0.1, 2)

[node name="Node3D6" type="Node3D" parent="." index="12"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 0, 1)

[node name="Sprite3D" type="Sprite3D" parent="Node3D6" index="0"]
transform = Transform3D(0.4, 0, 0, 0, 0.282843, 0.353553, 0, -0.282843, 0.353553, 0, 0.767499, -0.75)
cast_shadow = 0
shaded = true
no_depth_test = true
texture = ExtResource("32_srkvl")

[node name="StaticBody3D" type="StaticBody3D" parent="Node3D6" index="1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.498904, -0.5)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Node3D6/StaticBody3D" index="0"]
shape = SubResource("BoxShape3D_srkvl")
debug_color = Color(0, 0.6, 0.701961, 1)
